<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeeva Data</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>Last Received Data</h1>
    <textarea id="received-data" rows="10" cols="50"></textarea>

    <script>
        // jeeva.js

$(document).ready(function() {
    // Function to update textarea with received data
    function updateTextarea(data) {
        var textarea = $('#received-data');
        textarea.val('');
        data.forEach(function(entry) {
            textarea.val(textarea.val() +
                'ID: ' + entry.preValue + '\n' +
                'Additional Input: ' + entry.additional_input + '\n' +
                'LSL: ' + entry.lsl + '\n' +
                'USL: ' + entry.usl + '\n\n');
        });
    }

    // Function to fetch data from the server
    function fetchData() {
        $.ajax({
            url: '/jeeva/',  // URL of your Django view
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                updateTextarea(data.last_received_data);
            },
            error: function(xhr, status, error) {
                console.error('Error fetching data:', error);
            }
        });
    }

    // Fetch data initially when the page loads
    fetchData();

    // Fetch data periodically (every 5 seconds in this example)
    setInterval(fetchData, 100);
});

    </script>
</body>
</html>
